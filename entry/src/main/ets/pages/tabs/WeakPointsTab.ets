interface WeakPointItem {
  topic: string;
  subject: string;
  accuracy: string;
  color: string;
}

@Component
export struct WeakPointsTab {
  @State weakPointsCount: number = 0
  @State practiceCount: number = 0
  @State studyStreak: number = 0

  aboutToAppear() {
    this.loadStatistics()
  }

  loadStatistics() {
    // ä»ŽWeakPointManagerèŽ·å–æ•°æ®
    this.weakPointsCount = 3 // æ¨¡æ‹Ÿæ•°æ®
    this.practiceCount = 15 // æ¨¡æ‹Ÿæ•°æ®
    this.studyStreak = 7 // æ¨¡æ‹Ÿæ•°æ®
  }

  build() {
    Column() {
      // é¡¶éƒ¨æ ‡é¢˜æ 
      Row() {
        Text('ðŸ“Š è–„å¼±è®°å½•')
          .fontSize(24)
          .fontWeight(FontWeight.Bold)
          .fontColor('#2C3E50')
      }
      .width('90%')
      .padding({ top: 20, bottom: 20 })

      // ç»Ÿè®¡å¡ç‰‡
      Row() {
        Column() {
          Text(this.weakPointsCount.toString())
            .fontSize(28)
            .fontWeight(FontWeight.Bold)
            .fontColor('#FF6B6B')
          Text('è–„å¼±çŸ¥è¯†ç‚¹')
            .fontSize(12)
            .fontColor('#888')
            .margin({ top: 4 })
        }
        .width('48%')
        .height(100)
        .justifyContent(FlexAlign.Center)
        .backgroundColor('#FFFFFF')
        .borderRadius(12)
        .shadow({
          radius: 8,
          color: '#15000000',
          offsetX: 0,
          offsetY: 4
        })

        Blank()

        Column() {
          Text(this.practiceCount.toString())
            .fontSize(28)
            .fontWeight(FontWeight.Bold)
            .fontColor('#4CAF50')
          Text('ç»ƒä¹ æ¬¡æ•°')
            .fontSize(12)
            .fontColor('#888')
            .margin({ top: 4 })
        }
        .width('48%')
        .height(100)
        .justifyContent(FlexAlign.Center)
        .backgroundColor('#FFFFFF')
        .borderRadius(12)
        .shadow({
          radius: 8,
          color: '#15000000',
          offsetX: 0,
          offsetY: 4
        })
      }
      .width('90%')
      .margin({ bottom: 20 })

      // è–„å¼±ç‚¹åˆ—è¡¨
      Column() {
        Text('è–„å¼±çŸ¥è¯†ç‚¹')
          .fontSize(18)
          .fontWeight(FontWeight.Bold)
          .fontColor('#2C3E50')
          .alignSelf(ItemAlign.Start)
          .margin({ bottom: 16 })

        // æ¨¡æ‹Ÿè–„å¼±ç‚¹æ•°æ®
        Column() {
          ForEach([
            {
              topic: 'å…‰çš„æŠ˜å°„',
              subject: 'ç‰©ç†',
              accuracy: '60%',
              color: '#FF6B6B'
            },
            {
              topic: 'åˆ†æ•°è¿ç®—',
              subject: 'æ•°å­¦',
              accuracy: '75%',
              color: '#FFA726'
            },
            {
              topic: 'åŒ–å­¦æ–¹ç¨‹å¼',
              subject: 'åŒ–å­¦',
              accuracy: '45%',
              color: '#FF6B6B'
            }
          ], (item: WeakPointItem) => {
            Row() {
              Column() {
                Text(item.topic)
                  .fontSize(16)
                  .fontWeight(FontWeight.Medium)
                  .fontColor('#2C3E50')
                  .alignSelf(ItemAlign.Start)
                Text(item.subject)
                  .fontSize(12)
                  .fontColor('#888')
                  .margin({ top: 4 })
                  .alignSelf(ItemAlign.Start)
              }
              .layoutWeight(1)

              Column() {
                Text(item.accuracy)
                  .fontSize(18)
                  .fontWeight(FontWeight.Bold)
                  .fontColor(item.color)
                Text('æ­£ç¡®çŽ‡')
                  .fontSize(10)
                  .fontColor('#888')
                  .margin({ top: 2 })
              }
              .alignItems(HorizontalAlign.End)
            }
            .width('100%')
            .padding(16)
            .backgroundColor('#FFFFFF')
            .borderRadius(12)
            .margin({ bottom: 12 })
            .shadow({
              radius: 8,
              color: '#15000000',
              offsetX: 0,
              offsetY: 4
            })
          })
        }
      }
      .width('90%')
      .padding(20)
      .backgroundColor('#FFFFFF')
      .borderRadius(16)
      .shadow({
        radius: 12,
        color: '#20000000',
        offsetX: 0,
        offsetY: 6
      })
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#F8F8F8')
    .alignItems(HorizontalAlign.Center)
  }
}